<!DOCTYPE html><html>
<head>
    <meta charset="utf-8" />
    <title>La rebière</title>
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" type="text/css" />
    <link href="./rebiere.css" rel="stylesheet" />

    <script src="./js/updateClocks.js" language="JavaScript" type="application/javascript"></script>
    <script src="./js/moment.min.js" language="JavaScript" type="application/javascript"></script>
    <script src="https://d3js.org/d3.v5.min.js" language="JavaScript" type="application/javascript"></script>
    <script src="./js/d3-local.js" language="JavaScript" type="application/javascript"></script>
    <script src="./js/setTemperature.js" language="JavaScript" type="application/javascript"></script>
    <script src="./js/liquidFillGauge.js" language="JavaScript" type="application/javascript"></script>
    <script src="./js/floreal.js" language="JavaScript" type="application/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chroma-js/1.3.7/chroma.min.js" type="application/javascript"></script>

</head>
<body>
    <h1>La Rebière</h1>
    <div id="fullGrid">
        <div class="cell" id="republicanTime">
            <div class="header">temps républicain</div>
            <div class="data">
                <div class="value">
                    <div id="decimalClock"></div>
                    <div id="republicanDate"></div>
                </div>
            </div>
        </div>
        <div class="cell" id="waterLevel">
            <div class="header">niveau d'eau</div>
            <div class="data">
                <div id="waterGauge" class="value">
                    <svg id="waterLevelGauge" width="95%" height="95%"></svg>
                </div>
            </div>
        </div>
        <div class="cell" id="outdoorTemperature">
            <div class="header">température ext.</div>
            <div id="temp" class="data">
                <span id="outdoorsTemperatureValue" class="weather value"></span>
                <sup class="unit">°c</sup>
            </div>
        </div>
        <div class="cell" id="indoorTemperature">
                <div class="header">température int.</div>
                <div class="data">
                    <span id="indoorsTemperatureValue" class="weather value">15</span>
                    <sup class="unit">°c</sup>
                </div>
            </div>
        <div class="cell" id="fullWeatherChartContainer">
            <div class="header">météo des 7 derniers jours</div>
            <div class="data" id="fullWeatherChart"></div>
        </div>
    </div>
<script language="JavaScript" type="application/javascript">
    var myApp = myApp || {};

    myApp.updateDecimalClock('decimalClock');
    myApp.setRepublicanDate('republicanDate');
    myApp.getData('./data.json').then((data) => {
        myApp.drawChart(data, 'fullWeatherChart');
        myApp.setGauge(myApp.getLastValue(data, "waterLevel"), 'waterLevelGauge');
        myApp.setTemperature("outdoorsTemperatureValue", Math.round( myApp.getLastValue(data, "temperature") * 10 ) / 10)
        myApp.setTemperature("indoorsTemperatureValue", "todo")
    });
</script>
</body>
</html>
